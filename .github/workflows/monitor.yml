- name: Setup SSH Tunnel (Korea IP)
      env:
        ORACLE_KEY: ${{ secrets.ORACLE_KEY }}
        ORACLE_HOST: ${{ secrets.ORACLE_HOST }}
        ORACLE_USER: ${{ secrets.ORACLE_USER }}
      run: |
        mkdir -p ~/.ssh
        
        # 키 파일 생성 (줄바꿈 보존을 위해 printf 사용)
        printf "%s\n" "$ORACLE_KEY" > ~/.ssh/id_rsa
        chmod 600 ~/.ssh/id_rsa
        
        # ★ 수정됨: ssh-keyscan 삭제하고, 접속 명령어에 '무조건 수락' 옵션 추가
        # -o StrictHostKeyChecking=no: "이 서버 처음 보는데?" 묻지 말고 접속
        # -o UserKnownHostsFile=/dev/null: 서버 지문 저장 안 함 (에러 방지)
        # -v: 접속 과정을 로그에 자세히 찍음 (에러 나면 원인 보려고)
        ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -4 -D 8080 -f -C -N -i ~/.ssh/id_rsa $ORACLE_USER@$ORACLE_HOST -v
